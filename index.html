<body></body>
<script src="https://unpkg.com/tone"></script>
<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js?v=1"></script>
<script>

// function to create synth voices
function createVoice() {
  const synth = new Tone.Synth({
    oscillator: { type: "fatsine4"},
    envelope: { attack: 0.05, decay: 0.2, sustain: 0.3, release: 0.5 }
  });

  const reverb = new Tone.Reverb({ decay: 1.5, preDelay: 0.1, wet: 0.5 });
  synth.connect(reverb);
  reverb.toDestination();
  return synth;
}

// instruments
const lead = createVoice();
const tenor = createVoice();
const baritone = createVoice();
const bass = createVoice();
const melody = createVoice();

// mapping chords and harmonies
const chordTypes = ["I", "ii", "iii", "IV", "V", "vi"];
const harmonyRules = {
  I:  [0, 4, 7, 12],
  ii: [0, 3, 7, 10],
  iii:[0, 3, 7, 12],
  IV: [0, 4, 7, 12],
  V:  [0, 4, 7, 10],
  vi: [0, 3, 7, 12]
};

// random chord progression (4 chords long)
function generateChordProgression() {
  let progression = [];
  for (let i = 0; i < 4; i++) {
    progression.push(nn.random(chordTypes));
  }
  return progression;
}

</script>
